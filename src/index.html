<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bezpeƒçnƒõ na Netu</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Caveat:wght@500;700&family=Inter:wght@300;400;600;700&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'caveat': ['Caveat', 'cursive'],
                    }
                }
            }
        }
    </script>

    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- App Scripts -->
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        [x-cloak] {
            display: none !important;
        }

        /* Custom scrollbar for planner */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background-color: #f1f5f9;
        }

        /* === CHILD THEME: Explorers' Journal === */
        .paper-bg {
            background-color: #FFF8F0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
        }

        .striped-bar {
            background: repeating-linear-gradient(-45deg,
                    #E8722A,
                    #E8722A 4px,
                    #f49d6e 4px,
                    #f49d6e 8px);
        }

        .child-card-hover {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .child-card-hover:hover {
            transform: rotate(1deg) translateY(-4px);
            box-shadow: 6px 6px 0px #264653;
        }

        /* === TEEN THEME: Minimalist High-Tech === */
        .teen-light-bg {
            background-color: #F8F9FA;
            background-image: radial-gradient(#000000/3% 1px, transparent 1px);
            background-size: 24px 24px;
        }

        .lime-glow:hover {
            box-shadow: 0 10px 40px rgba(191, 255, 0, 0.25);
            transform: translateY(-2px);
        }

        .teen-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .teen-scrollbar::-webkit-scrollbar-thumb {
            background-color: #ddd;
            border-radius: 4px;
        }

        .teen-scrollbar::-webkit-scrollbar-track {
            background-color: transparent;
        }

        /* Lime fill button transition */
        .lime-btn {
            transition: all 0.15s ease;
        }

        .lime-btn:hover {
            background-color: #BFFF00;
            color: #0F0F0F;
        }
    </style>
</head>

<body class="antialiased h-screen overflow-hidden font-sans transition-colors duration-300">

    <!-- App Container -->
    <div x-data="app()" class="h-full w-full relative flex flex-col transition-colors duration-500"
        x-effect="$nextTick(() => { if(window.lucide) lucide.createIcons(); })" :class="{
            'paper-bg text-[#264653] selection:bg-orange-200 selection:text-orange-900': userAgeGroup === 'child',
            'teen-light-bg text-[#1A1A1A] selection:bg-[#BFFF00]/30 selection:text-black': userAgeGroup === 'teen'
        }">

        <!-- Header / Navigation -->
        <header class="flex-none px-6 flex justify-between items-center z-50 transition-all duration-300" :class="{
                'bg-[#264653] border-b-4 border-[#E8722A] py-5 shadow-lg': userAgeGroup === 'child',
                'bg-white border-b-[2px] border-black py-4 shadow-sm': userAgeGroup === 'teen'
            }">
            <div class="flex items-center gap-3">
                <span class="transition-all duration-300" :class="{
                        'text-3xl': userAgeGroup === 'child',
                        'text-xl': userAgeGroup === 'teen'
                    }" x-text="userAgeGroup === 'child' ? 'üõ°Ô∏è' : '‚ö°'"></span>
                <div>
                    <h1 class="font-bold leading-tight transition-all duration-300" :class="{
                            'text-2xl text-white font-caveat tracking-wide': userAgeGroup === 'child',
                            'text-lg text-[#E5E5E5] uppercase tracking-[0.2em] font-normal': userAgeGroup === 'teen'
                        }">Bezpeƒçnƒõ na Netu</h1>
                </div>
            </div>

            <div class="flex gap-4">
                <button x-show="currentView !== 'menu'" @click="setView('menu')"
                    class="px-5 py-2 font-bold transition-all duration-300" :class="{
                        'bg-[#E8722A]/20 text-white hover:bg-[#E8722A]/40 border-2 border-white/30 rounded-lg text-sm': userAgeGroup === 'child',
                        'bg-black text-white hover:bg-[#BFFF00] hover:text-black rounded-none uppercase tracking-widest text-[10px]': userAgeGroup === 'teen'
                    }">
                    ‚Üê Zpƒõt
                </button>
                <button @click="resetApp()" class="px-4 py-2 text-sm font-semibold transition-all duration-300" :class="{
                        'text-white/70 hover:text-white rounded-lg': userAgeGroup === 'child',
                        'text-black/40 hover:text-black rounded-none uppercase text-[10px] tracking-widest': userAgeGroup === 'teen'
                    }" title="Resetovat cel√Ω postup">
                    Od zaƒç√°tku
                </button>
            </div>
        </header>

        <!-- Dynamic Content Area -->
        <main class="flex-grow overflow-hidden relative w-full h-full">

            <!-- VIEW: Menu / Dashboard -->
            <div x-show="currentView === 'menu'" x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 scale-95" x-transition:enter-end="opacity-100 scale-100"
                class="absolute inset-0 p-8 md:p-12 overflow-y-auto">

                <div class="max-w-5xl mx-auto">
                    <div class="relative inline-block">
                        <h2 @dblclick="showDebug = !showDebug"
                            class="font-bold mb-2 transition-all duration-300 cursor-default select-none" :class="{
                                    'text-4xl text-[#264653] font-caveat': userAgeGroup === 'child',
                                    'text-3xl text-black uppercase tracking-[0.25em] font-black': userAgeGroup === 'teen'
                                }">V√≠tej v kurzu</h2>

                        <!-- Hidden Debug Menu -->
                        <div x-show="showDebug" x-cloak
                            class="absolute top-12 left-0 bg-black text-[#BFFF00] p-4 text-[10px] uppercase font-bold tracking-widest border-2 border-[#BFFF00] z-[100] flex flex-col gap-2 shadow-2xl min-w-[200px]">
                            <button @click="debugFinishM1()"
                                class="p-2 border border-[#BFFF00]/30 hover:bg-[#BFFF00] hover:text-black text-left">‚ö°
                                Finish Module 1</button>
                            <button @click="debugFinishM2()"
                                class="p-2 border border-[#BFFF00]/30 hover:bg-[#BFFF00] hover:text-black text-left">üìÖ
                                Finish Module 2</button>
                            <button @click="debugShowReport()"
                                class="p-2 border border-[#BFFF00]/30 hover:bg-[#BFFF00] hover:text-black text-left">üìä
                                View Results Page</button>
                            <button @click="showDebug = false" class="p-1 text-[8px] opacity-70 text-center">‚úï Close
                                Menu</button>
                        </div>
                    </div>
                    <p class="mb-10 max-w-2xl transition-all duration-300" :class="{
                            'text-lg text-[#264653]/80 font-medium': userAgeGroup === 'child',
                            'text-sm text-black/50 tracking-widest uppercase font-medium': userAgeGroup === 'teen'
                        }">
                        Tento projekt ti pom≈Ø≈æe zanalyzovat tv√© digit√°ln√≠ n√°vyky a nauƒçit se l√©pe reagovat na rizikov√©
                        situace online.
                        Pro z√≠sk√°n√≠ fin√°ln√≠ho profilu projdi oba moduly.
                    </p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
                        <!-- Module 1 Card -->
                        <button @click="setView('module-1')"
                            class="group relative p-8 text-left border overflow-hidden transition-all duration-300"
                            :class="{
                                'bg-[#FFF8F0] rounded-xl border-[3px] border-[#264653] shadow-[4px_4px_0px_#264653] child-card-hover': userAgeGroup === 'child',
                                'bg-white rounded-none border-[2px] border-black lime-glow': userAgeGroup === 'teen'
                            }">
                            <div class="absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-100 transform group-hover:scale-125 transition-all text-7xl grayscale group-hover:grayscale-0"
                                :class="{
                                    'text-[#264653]': userAgeGroup === 'child',
                                    'text-black': userAgeGroup === 'teen'
                                }">
                                üí¨
                            </div>

                            <div class="relative z-10">
                                <span class="text-xs font-bold uppercase tracking-[0.2em] mb-2 block" :class="{
                                        'text-[#E8722A]': userAgeGroup === 'child',
                                        'text-black/30': userAgeGroup === 'teen'
                                    }">Modul 1</span>
                                <h3 class="text-2xl font-bold mb-3 transition-colors uppercase tracking-widest" :class="{
                                        'text-[#264653] font-caveat text-3xl group-hover:text-[#E8722A] lowercase tracking-normal': userAgeGroup === 'child',
                                        'text-black group-hover:text-[#BFFF00]': userAgeGroup === 'teen'
                                    }">
                                    Situace &amp; Reakce</h3>
                                <p class="mb-6 mr-10" :class="{
                                        'text-[#264653]/70': userAgeGroup === 'child',
                                        'text-black/60 text-xs font-medium leading-relaxed': userAgeGroup === 'teen'
                                    }">Analyzuj rizikov√© sc√©n√°≈ôe (kyber≈°ikana, privacy, doxing)
                                    a vyber nejvhodnƒõj≈°√≠ strategii.</p>

                                <div class="flex items-center gap-2 font-semibold"
                                    :class="appStorage.module1Completed ? 'text-green-600' : (userAgeGroup === 'child' ? 'text-[#E8722A]' : 'text-[#BFFF00]')">
                                    <span
                                        x-text="appStorage.module1Completed ? 'Hotovo ‚úì' : 'Spustit anal√Ωzu ‚Üí'"></span>
                                </div>
                            </div>
                        </button>

                        <!-- Module 2 Card -->
                        <button @click="setView('module-2')"
                            class="group relative p-8 text-left border overflow-hidden transition-all duration-300"
                            :class="{
                                'bg-[#FFF8F0] rounded-xl border-[3px] border-[#264653] shadow-[4px_4px_0px_#264653] child-card-hover': userAgeGroup === 'child',
                                'bg-white rounded-none border-[2px] border-black lime-glow': userAgeGroup === 'teen'
                            }">
                            <div class="absolute top-0 right-0 p-8 opacity-10 group-hover:opacity-100 transform group-hover:scale-125 transition-all text-7xl grayscale group-hover:grayscale-0"
                                :class="{
                                    'text-[#264653]': userAgeGroup === 'child',
                                    'text-black': userAgeGroup === 'teen'
                                }">
                                üìÖ
                            </div>

                            <div class="relative z-10">
                                <span class="text-xs font-bold uppercase tracking-[0.2em] mb-2 block" :class="{
                                        'text-[#2A9D8F]': userAgeGroup === 'child',
                                        'text-black/30': userAgeGroup === 'teen'
                                    }">Modul 2</span>
                                <h3 class="text-2xl font-bold mb-3 transition-colors uppercase tracking-widest" :class="{
                                        'text-[#264653] font-caveat text-3xl group-hover:text-[#2A9D8F] lowercase tracking-normal': userAgeGroup === 'child',
                                        'text-black group-hover:text-[#BFFF00]': userAgeGroup === 'teen'
                                    }">
                                    Digit√°ln√≠ Den</h3>
                                <p class="mb-6 mr-10" :class="{
                                        'text-[#264653]/70': userAgeGroup === 'child',
                                        'text-black/60 text-xs font-medium leading-relaxed': userAgeGroup === 'teen'
                                    }">Audit tv√©ho bƒõ≈æn√©ho dne. Zjisti, jak technologie ovliv≈àuj√≠ tv≈Øj sp√°nek a
                                    regeneraci.</p>

                                <div class="flex items-center gap-2 font-semibold"
                                    :class="appStorage.module2Completed ? 'text-green-600' : (userAgeGroup === 'child' ? 'text-[#2A9D8F]' : 'text-[#BFFF00]')">
                                    <span x-text="appStorage.module2Completed ? 'Hotovo ‚úì' : 'Spustit audit ‚Üí'"></span>
                                </div>
                            </div>
                        </button>
                    </div>

                    <!-- Final Results Check -->
                    <div x-show="appStorage.module1Completed && appStorage.module2Completed"
                        class="p-10 shadow-2xl flex flex-col md:flex-row items-center justify-between gap-6 transition-all duration-300"
                        :class="{
                            'bg-[#264653] text-white rounded-xl border-[3px] border-[#E8722A]': userAgeGroup === 'child',
                            'bg-black text-white rounded-none border-[2px] border-black shadow-[20px_20px_0px_rgba(191,255,0,0.2)]': userAgeGroup === 'teen'
                        }">
                        <div>
                            <h3 class="text-2xl font-bold mb-2 uppercase tracking-widest" :class="{
                                'font-caveat text-3xl tracking-normal lowercase': userAgeGroup === 'child',
                                'font-black': userAgeGroup === 'teen'
                            }">Kompetenƒçn√≠ profil je p≈ôipraven</h3>
                            <p :class="{
                                'text-white/70': userAgeGroup === 'child',
                                'text-[#BFFF00]/70 text-[10px] uppercase tracking-widest font-black': userAgeGroup === 'teen'
                            }">Anal√Ωza obou modul≈Ø byla dokonƒçena. Pod√≠vej se na v√Ωsledky.</p>
                        </div>
                        <button @click="setView('final-results')"
                            class="px-10 py-5 font-black shadow-lg whitespace-nowrap transition-all duration-300"
                            :class="{
                                'bg-[#E8722A] text-white hover:bg-[#d4651f] rounded-lg': userAgeGroup === 'child',
                                'bg-[#BFFF00] text-black hover:bg-white rounded-none uppercase tracking-[0.3em] text-[10px]': userAgeGroup === 'teen'
                            }">
                            Zobrazit profil
                        </button>
                    </div>

                </div>

                <!-- Age Gate Modal -->
                <div x-show="showAgeGate"
                    class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm"
                    x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0"
                    x-transition:enter-end="opacity-100" x-cloak>
                    <div class="bg-white rounded-2xl p-8 max-w-2xl w-full shadow-2xl" @click.away="/* block closing */">
                        <h2 class="text-3xl font-bold text-slate-900 mb-2 text-center">V√≠tej v projektu</h2>
                        <p class="text-slate-600 mb-10 text-center text-lg">
                            Ne≈æ zaƒçneme, vyber si verzi, kter√° ti nejv√≠ce vyhovuje.
                        </p>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <!-- Option 1: Child (11-14) -->
                            <button @click="acceptAgeGate('child')"
                                class="flex flex-col items-center p-6 rounded-2xl border-2 border-slate-100 hover:border-indigo-500 hover:bg-indigo-50 transition-all text-center group">
                                <div class="text-5xl mb-4 group-hover:scale-110 transition-transform">üéÆ</div>
                                <h3 class="text-xl font-bold text-slate-900 mb-2">Pro dƒõti</h3>
                                <p class="text-sm text-slate-500">11 ‚Äì 14 let</p>
                                <p class="text-xs text-slate-400 mt-4">Hravƒõj≈°√≠ grafika a jednodu≈°≈°√≠ vysvƒõtlen√≠.</p>
                            </button>

                            <!-- Option 2: Teen (15+) -->
                            <button @click="acceptAgeGate('teen')"
                                class="flex flex-col items-center p-6 rounded-2xl border-2 border-slate-100 hover:border-teal-500 hover:bg-teal-50 transition-all text-center group">
                                <div class="text-5xl mb-4 group-hover:scale-110 transition-transform">üì±</div>
                                <h3 class="text-xl font-bold text-slate-900 mb-2">Pro dosp√≠vaj√≠c√≠</h3>
                                <p class="text-sm text-slate-500">15+ let</p>
                                <p class="text-xs text-slate-400 mt-4">Seri√≥znƒõj≈°√≠ design a detailnƒõj≈°√≠ anal√Ωza.</p>
                            </button>
                        </div>

                        <div class="text-center">
                            <button @click="window.location.href = 'https://google.com'"
                                class="text-slate-400 hover:text-slate-600 font-medium text-sm underline decoration-slate-200 underline-offset-4 transition-colors">
                                Nechci se √∫ƒçastnit a opustit str√°nku
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW: Module 1 (Situational Analysis) -->
            <div x-show="currentView === 'module-1'" x-data="quizStore()"
                @module-complete.window="completeModule($event.detail.moduleId)" x-cloak
                class="absolute inset-0 overflow-y-auto p-4 md:p-8">

                <div class="max-w-4xl mx-auto h-full flex flex-col">
                    <!-- Progress Header -->
                    <div class="flex justify-between items-center mb-4 flex-none" x-show="!showResults">
                        <span class="font-bold uppercase tracking-widest transition-all duration-300" :class="{
                                'text-base text-[#E8722A]': userAgeGroup === 'child',
                                'text-[10px] text-black/40 tracking-[0.25em]': userAgeGroup === 'teen'
                            }">
                            P≈ô√≠padov√° studie <span x-text="currentScenarioIndex + 1"
                                :class="userAgeGroup === 'teen' ? 'text-black font-black' : ''"></span> / <span
                                x-text="activeScenarios.length"></span>
                        </span>
                        <div class="overflow-hidden transition-all duration-300" :class="{
                                'w-40 h-3 bg-[#264653]/20 rounded-full': userAgeGroup === 'child',
                                'w-32 h-[4px] bg-black/5 rounded-none': userAgeGroup === 'teen'
                            }">
                            <div class="h-full transition-all duration-300" :class="{
                                    'striped-bar rounded-full': userAgeGroup === 'child',
                                    'bg-[#BFFF00]': userAgeGroup === 'teen'
                                }" :style="`width: ${progressPercentage}%`"></div>
                        </div>
                    </div>

                    <!-- Scenario Card -->
                    <div x-show="!showResults && scenario" x-transition
                        class="shadow-sm border overflow-hidden flex-grow md:flex-none transition-all duration-300"
                        :class="{
                            'bg-[#FFF8F0] rounded-xl border-[3px] border-[#264653]': userAgeGroup === 'child',
                            'bg-white rounded-none border-[2px] border-black shadow-[10px_10px_0px_rgba(0,0,0,0.03)]': userAgeGroup === 'teen'
                        }">

                        <div class="p-6 md:p-8 border-b transition-all duration-300" :class="{
                                'border-[#264653]/20 bg-[#264653]/5': userAgeGroup === 'child',
                                'border-black/10 bg-black/[0.02]': userAgeGroup === 'teen'
                            }">
                            <div class="inline-block px-3 py-1 text-xs font-bold mb-4 uppercase tracking-widest transition-all duration-300"
                                :class="{
                                    'text-white rounded-md': userAgeGroup === 'child',
                                    'text-black rounded-none border border-black': userAgeGroup === 'teen',
                                    'bg-[#E8722A]': scenario.category === 'safety' && userAgeGroup === 'child',
                                    'bg-[#5D5FEF]': scenario.category === 'empathy' && userAgeGroup === 'child',
                                    'bg-[#2A9D8F]': scenario.category === 'wellbeing' && userAgeGroup === 'child',
                                    'bg-[#FF3E3E]': scenario.category === 'safety' && userAgeGroup === 'teen',
                                    'bg-[#A066FF]': scenario.category === 'empathy' && userAgeGroup === 'teen',
                                    'bg-[#00F0FF]': scenario.category === 'wellbeing' && userAgeGroup === 'teen'
                                }" x-text="scenario.category"></div>
                            <h2 class="font-bold mb-4 transition-all duration-300" :class="{
                                    'text-3xl md:text-4xl text-[#264653] font-caveat': userAgeGroup === 'child',
                                    'text-xl md:text-2xl text-black uppercase tracking-widest font-black': userAgeGroup === 'teen'
                                }" x-text="scenario.title"></h2>
                            <p class="leading-relaxed transition-all duration-300" :class="{
                                    'text-lg text-[#264653]/80': userAgeGroup === 'child',
                                    'text-xs text-black/50 font-medium uppercase tracking-widest': userAgeGroup === 'teen'
                                }" x-text="scenario.description"></p>
                        </div>

                        <div class="p-6 md:p-8" :class="{
                                'bg-[#FFF8F0]': userAgeGroup === 'child',
                                'bg-white font-sans': userAgeGroup === 'teen'
                            }">
                            <h3 class="font-bold uppercase mb-4 transition-all duration-300" :class="{
                                    'text-base text-[#E8722A]': userAgeGroup === 'child',
                                    'text-xs text-[#6B7280] tracking-[0.2em]': userAgeGroup === 'teen'
                                }">Vyber jedno ≈ôe≈°en√≠:</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                                <template x-for="option in scenario.options">
                                    <button @click="selectAnswer(option)"
                                        class="text-left p-5 border transition-all flex items-center justify-between group h-full"
                                        :class="{
                                            'border-2 border-[#264653]/30 hover:border-[#E8722A] hover:bg-[#E8722A]/10 rounded-lg': userAgeGroup === 'child',
                                            'border-black/10 hover:border-black hover:bg-black hover:text-white rounded-none': userAgeGroup === 'teen'
                                        }">
                                        <span x-text="option.text" class="font-bold transition-colors" :class="{
                                                'text-[#264653] group-hover:text-[#E8722A]': userAgeGroup === 'child',
                                                'text-black/60 group-hover:text-white uppercase tracking-widest text-[11px]': userAgeGroup === 'teen'
                                            }"></span>
                                        <span class="opacity-0 group-hover:opacity-100 font-bold ml-2 transition-all"
                                            :class="{
                                                'text-[#E8722A]': userAgeGroup === 'child',
                                                'text-[#BFFF00]': userAgeGroup === 'teen'
                                            }">‚Üí</span>
                                    </button>
                                </template>
                            </div>
                        </div>
                    </div>

                    <!-- Immediate Feedback Overlay -->
                    <div x-show="showFeedback"
                        class="fixed inset-0 z-50 flex items-center justify-center p-4 transition-all duration-500"
                        x-transition.opacity :class="{
                            'bg-[#264653]/60 backdrop-blur-sm': userAgeGroup === 'child',
                            'bg-black/40 backdrop-blur-md': userAgeGroup === 'teen'
                        }">

                        <div class="max-w-xl w-full p-8 shadow-2xl transform transition-all" :class="{
                                'bg-[#FFF8F0] border-[3px] border-[#264653] rounded-xl': userAgeGroup === 'child',
                                'bg-white border-[2px] border-black rounded-none shadow-[20px_20px_0px_rgba(0,0,0,0.1)]': userAgeGroup === 'teen'
                            }" @click.outside="nextScenario()">

                            <div class="flex items-center gap-4 mb-6">
                                <div class="rounded-full flex items-center justify-center shrink-0 transition-all"
                                    :class="{
                                        'w-14 h-14 text-xl': userAgeGroup === 'child',
                                        'w-10 h-10 text-sm': userAgeGroup === 'teen',
                                        'bg-green-100 text-green-700': currentFeedbackBlock?.type === 'ideal',
                                        'bg-yellow-100 text-yellow-700': currentFeedbackBlock?.type === 'ok',
                                        'bg-red-100 text-red-700': currentFeedbackBlock?.type === 'bad'
                                    }">
                                    <span
                                        x-text="currentFeedbackBlock?.type === 'ideal' ? '‚úì' : (currentFeedbackBlock?.type === 'bad' ? '!' : 'i')"></span>
                                </div>
                                <h3 class="font-bold transition-all" :class="{
                                        'text-2xl text-[#264653] font-caveat': userAgeGroup === 'child',
                                        'text-base text-black uppercase tracking-[0.2em] font-black': userAgeGroup === 'teen'
                                    }"
                                    x-text="currentFeedbackBlock?.type === 'ideal' ? 'Doporuƒçen√Ω postup' : (currentFeedbackBlock?.type === 'bad' ? 'Rizikov√© chov√°n√≠' : 'Akceptovateln√©')">
                                </h3>
                            </div>

                            <p class="mb-8 leading-relaxed transition-all" :class="{
                                    'text-lg text-[#264653]/80': userAgeGroup === 'child',
                                    'text-sm text-black/60 font-medium': userAgeGroup === 'teen'
                                }" x-text="currentFeedbackBlock?.feedback"></p>

                            <button @click="nextScenario()" class="w-full py-3 font-bold transition-all" :class="{
                                    'bg-[#E8722A] hover:bg-[#d4651f] text-white text-lg rounded-lg': userAgeGroup === 'child',
                                    'bg-[#BFFF00] hover:bg-[#d4ff4d] text-[#0F0F0F] rounded-none uppercase tracking-widest text-sm': userAgeGroup === 'teen'
                                }">
                                Pokraƒçovat
                            </button>
                        </div>
                    </div>

                    <!-- Module 1 Completion -->
                    <div x-show="showResults" class="text-center py-12 max-w-2xl mx-auto">
                        <div class="flex items-center justify-center mx-auto mb-6 transition-all duration-300" :class="{
                                'w-20 h-20 rounded-full bg-[#2A9D8F] text-white text-4xl': userAgeGroup === 'child',
                                'w-16 h-16 rounded-none bg-[#BFFF00]/10 text-[#BFFF00] text-3xl border border-[#BFFF00]': userAgeGroup === 'teen'
                            }">
                            ‚úì</div>
                        <h2 class="font-bold mb-4 transition-all duration-300" :class="{
                                'text-4xl text-[#264653] font-caveat': userAgeGroup === 'child',
                                'text-2xl text-[#E5E5E5] uppercase tracking-[0.15em] font-light': userAgeGroup === 'teen'
                            }">Anal√Ωza dokonƒçena</h2>
                        <p class="mb-8 transition-all duration-300" :class="{
                                'text-lg text-[#264653]/80': userAgeGroup === 'child',
                                'text-sm text-[#6B7280]': userAgeGroup === 'teen'
                            }">Tv√© odpovƒõdi byly zaznamen√°ny do kompetenƒçn√≠ho profilu.</p>
                        <button @click="setView('menu')" class="px-8 py-3 font-bold transition-all duration-300" :class="{
                                'bg-[#E8722A] hover:bg-[#d4651f] text-white text-lg rounded-lg': userAgeGroup === 'child',
                                'bg-[#BFFF00] hover:bg-[#d4ff4d] text-[#0F0F0F] rounded-none uppercase tracking-widest text-sm': userAgeGroup === 'teen'
                            }">
                            Zpƒõt na p≈ôehled
                        </button>
                    </div>
                </div>
            </div>

            <!-- VIEW: Module 2 (Day Audit) -->
            <div x-show="currentView === 'module-2'" x-data="plannerStore()"
                @module-complete.window="completeModule($event.detail.moduleId)" @mouseup.window="stopDrag()" x-cloak
                class="absolute inset-0 flex flex-col h-full overflow-hidden">

                <!-- Audit Header -->
                <div class="border-b p-3 flex justify-between items-center shadow-sm z-10 flex-none transition-all duration-300"
                    :class="{
                        'bg-[#264653] border-[#E8722A]': userAgeGroup === 'child',
                        'bg-[#111] border-[#333]': userAgeGroup === 'teen'
                    }">
                    <div class="flex items-center gap-4">
                        <h2 class="font-bold hidden md:block transition-colors duration-300" :class="{
                                'text-white font-caveat text-xl': userAgeGroup === 'child',
                                'text-[#E5E5E5] uppercase tracking-[0.15em] text-sm font-normal': userAgeGroup === 'teen'
                            }">Digit√°ln√≠ Den</h2>
                        <div class="h-6 w-px hidden md:block transition-colors duration-300" :class="{
                                'bg-white/20': userAgeGroup === 'child',
                                'bg-[#333]': userAgeGroup === 'teen'
                            }"></div>
                        <div class="text-xs transition-colors duration-300" :class="{
                                'text-white/70': userAgeGroup === 'child',
                                'text-[#6B7280]': userAgeGroup === 'teen'
                            }">
                            Vypl≈à sv≈Øj bƒõ≈æn√Ω den. <br class="md:hidden"> Nezapome≈à na sp√°nek!
                        </div>
                    </div>

                    <div class="flex items-center gap-4">
                        <div class="text-right hidden sm:block">
                            <div class="text-xs uppercase font-bold tracking-widest transition-colors duration-300"
                                :class="{
                                    'text-white/60': userAgeGroup === 'child',
                                    'text-[#6B7280]': userAgeGroup === 'teen'
                                }">Pasivn√≠ Screen Time</div>
                            <div class="font-mono font-bold"
                                :class="totalPassiveScreenTime > 2 ? 'text-orange-500' : 'text-green-500'">
                                <span x-text="totalPassiveScreenTime"></span>h
                            </div>
                        </div>
                        <button @click="evaluateDay()" :disabled="!isGridFull"
                            class="px-6 py-2 font-bold text-sm transition-all shadow-sm border"
                            :class="isGridFull ? (
                                userAgeGroup === 'child' ? 
                                    'bg-[#E8722A] hover:bg-[#d4651f] text-white border-transparent shadow-md rounded-lg' : 
                                    'bg-[#BFFF00] text-[#0F0F0F] hover:bg-[#d4ff4d] border-transparent shadow-md rounded-none uppercase tracking-widest'
                            ) : (userAgeGroup === 'teen' ? 'bg-[#1A1A1A] text-[#333] cursor-not-allowed border-[#333] rounded-none' : 'bg-slate-100 text-slate-400 cursor-not-allowed border-transparent rounded-lg')">
                            Dokonƒçit audit
                        </button>
                    </div>
                </div>

                <div class="flex-grow flex overflow-hidden">
                    <!-- Sidebar Palette (Desktop) -->
                    <div class="w-64 border-r overflow-y-auto p-4 custom-scrollbar hidden md:block flex-none transition-colors duration-300"
                        :class="{
                            'bg-[#FFF8F0] border-[#264653]/20': userAgeGroup === 'child',
                            'bg-white border-black border-r-[2px]': userAgeGroup === 'teen'
                        }">
                        <h3 class="text-xs font-bold uppercase tracking-widest mb-4 transition-colors" :class="{
                            'text-[#E8722A]': userAgeGroup === 'child',
                            'text-[#6B7280]': userAgeGroup === 'teen'
                        }">Aktivity</h3>

                        <div class="space-y-6">
                            <!-- Mandatory -->
                            <div>
                                <h4 class="text-xs font-bold mb-2 flex justify-between transition-colors uppercase tracking-widest"
                                    :class="{
                                    'text-[#264653]': userAgeGroup === 'child',
                                    'text-black/40': userAgeGroup === 'teen'
                                }">
                                    Z√°kladn√≠ pot≈ôeby
                                    <span x-show="mandatoryComplete" class="text-green-500">‚úì</span>
                                </h4>
                                <div class="space-y-1">
                                    <template x-for="act in mandatoryActivities">
                                        <button @click="selectActivity(act.id)"
                                            class="w-full flex items-center gap-3 p-2 rounded-md transition-all border outline-none"
                                            :class="{
                                                'hover:bg-slate-50 border-transparent': selectedActivityId !== act.id,
                                                'shadow-sm ml-1': selectedActivityId === act.id,
                                                [act.color]: selectedActivityId === act.id,
                                                'border-[#E8722A]': selectedActivityId === act.id && userAgeGroup === 'child',
                                                'border-black shadow-[4px_4px_0px_rgba(0,0,0,1)] -translate-y-1 ml-1': selectedActivityId === act.id && userAgeGroup === 'teen'
                                            }">
                                            <div class="w-8 h-8 rounded flex items-center justify-center border transition-all shrink-0"
                                                :class="{
                                                    'bg-[#FFF8F0] border-[#264653]/10 text-[#264653]': userAgeGroup === 'child',
                                                    'bg-white border-black text-black': userAgeGroup === 'teen'
                                                }">
                                                <i :data-lucide="act.icon" class="w-4 h-4"></i>
                                            </div>
                                            <span class="text-sm font-medium text-slate-700" x-text="act.name"></span>
                                        </button>
                                    </template>
                                </div>
                            </div>

                            <!-- Optional -->
                            <div :class="mandatoryComplete ? '' : 'opacity-40 pointer-events-none'">
                                <h4 class="text-xs font-bold mb-2 transition-colors uppercase tracking-widest" :class="{
                                    'text-[#264653]': userAgeGroup === 'child',
                                    'text-black/40': userAgeGroup === 'teen'
                                }">Voln√Ω ƒças</h4>
                                <div class="space-y-1">
                                    <template x-for="act in optionalActivities">
                                        <button @click="selectActivity(act.id)"
                                            class="w-full flex items-center gap-3 p-2 rounded-md transition-all border outline-none"
                                            :class="{
                                                'hover:bg-slate-50 border-transparent': selectedActivityId !== act.id,
                                                'shadow-sm ml-1': selectedActivityId === act.id,
                                                [act.color]: selectedActivityId === act.id,
                                                'border-[#E8722A]': selectedActivityId === act.id && userAgeGroup === 'child',
                                                'border-black shadow-[4px_4px_0px_rgba(0,0,0,1)] -translate-y-1 ml-1': selectedActivityId === act.id && userAgeGroup === 'teen'
                                            }">
                                            <div class="w-8 h-8 rounded flex items-center justify-center border transition-all shrink-0"
                                                :class="{
                                                    'bg-[#FFF8F0] border-[#264653]/10 text-[#264653]': userAgeGroup === 'child',
                                                    'bg-white border-black text-black': userAgeGroup === 'teen'
                                                }">
                                                <i :data-lucide="act.icon" class="w-4 h-4"></i>
                                            </div>
                                            <span class="text-sm font-medium"
                                                :class="selectedActivityId === act.id && act.color.includes('bg-black') ? 'text-white' : (userAgeGroup === 'child' ? 'text-slate-700' : 'text-black')"
                                                x-text="act.name"></span>
                                        </button>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main Grid Container -->
                    <div class="flex-grow p-2 md:p-4 overflow-y-auto relative flex flex-col transition-colors duration-300"
                        :class="{
                            'bg-[#FFF8F0]/50': userAgeGroup === 'child',
                            'teen-light-bg': userAgeGroup === 'teen'
                        }">

                        <!-- Mobile Palette (Visible < MD) -->
                        <div
                            class="md:hidden w-full bg-white mb-2 rounded-lg shadow-sm p-2 flex gap-2 overflow-x-auto flex-none whitespace-nowrap">
                            <template x-for="act in mandatoryActivities.concat(optionalActivities)">
                                <button @click="selectActivity(act.id)"
                                    class="inline-flex items-center gap-2 px-3 py-2 rounded-full border text-xs font-bold shrink-0"
                                    :class="[act.color, selectedActivityId === act.id ? 'ring-2 ring-black' : '']">
                                    <span x-show="act.icon.length > 2" class="w-4 h-4 flex items-center justify-center">
                                        <i :data-lucide="act.icon" class="w-3 h-3"></i>
                                    </span>
                                    <span x-show="act.icon.length <= 2" x-text="act.icon"></span>
                                    <span x-text="act.name"></span>
                                </button>
                            </template>
                        </div>

                        <!-- Grid itself -->
                        <!-- FIX: Reduced padding and ensured container fits. Using flex-grow on container is good, but 
                             if grid items are too tall, they will scroll. That's expected, but we want to minimize it.
                             Reducing grid gap and container max-width. -->
                        <div class="grid grid-cols-4 md:grid-cols-6 lg:grid-cols-12 gap-1 w-full max-w-6xl mx-auto p-3 shadow-sm border transition-all duration-500 select-none"
                            x-effect="grid; $nextTick(() => { if(window.lucide) lucide.createIcons(); })" :class="{
                                'bg-white rounded-xl border-[#264653]/20': userAgeGroup === 'child',
                                'bg-white rounded-none border-[2px] border-black shadow-[15px_15px_0px_rgba(0,0,0,0.05)]': userAgeGroup === 'teen'
                            }">
                            <template x-for="(cell, index) in grid">
                                <div @mousedown="startDrag(index)" @mouseenter="onDragOver(index)"
                                    class="aspect-square relative border transition-colors cursor-pointer" :class="{
                                        'border-slate-100 hover:border-[#E8722A]': userAgeGroup === 'child',
                                        'border-black/5 hover:border-black': userAgeGroup === 'teen',
                                        'bg-white': !cell && userAgeGroup === 'child',
                                        'bg-white': !cell && userAgeGroup === 'teen'
                                    }">

                                    <span
                                        class="absolute top-0 left-1 text-[9px] font-mono pointer-events-none transition-colors"
                                        :class="{
                                            'text-[#264653]/30': userAgeGroup === 'child',
                                            'text-[#6B7280]/50': userAgeGroup === 'teen'
                                        }" x-text="formatTime(index)" x-show="!cell"></span>

                                    <div x-show="cell"
                                        x-init="$watch('cell', () => $nextTick(() => { if(window.lucide) lucide.createIcons(); }))"
                                        class="w-full h-full flex items-center justify-center border transition-all"
                                        :class="getActivityColor(cell)">
                                        <i :data-lucide="getActivityIcon(cell)" class="w-5 h-5 opacity-80"></i>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>

                <!-- Module 2 Completion Overlay -->
                <div x-show="showResults"
                    class="absolute inset-0 z-50 flex flex-col items-center justify-center p-8 transition-all duration-300"
                    :class="{
                        'paper-bg': userAgeGroup === 'child',
                        'teen-light-bg': userAgeGroup === 'teen'
                    }">
                    <h2 class="font-bold mb-4 transition-all duration-300" :class="{
                            'text-4xl text-[#264653] font-caveat': userAgeGroup === 'child',
                            'text-3xl text-black uppercase tracking-[0.2em] font-black': userAgeGroup === 'teen'
                        }">Denn√≠ audit ulo≈æen</h2>
                    <p class="mb-8 transition-all duration-300" :class="{
                            'text-lg text-[#264653]/80': userAgeGroup === 'child',
                            'text-xs text-black/50 uppercase tracking-widest font-medium': userAgeGroup === 'teen'
                        }">Data o tv√©m sp√°nku a ƒçasu u obrazovky byla zpracov√°na.</p>
                    <button @click="setView('menu')" class="px-10 py-4 font-black transition-all duration-300" :class="{
                            'bg-[#2A9D8F] hover:bg-[#248f82] text-white text-lg rounded-lg': userAgeGroup === 'child',
                            'bg-black hover:bg-[#BFFF00] hover:text-black text-white rounded-none uppercase tracking-[0.3em] text-[10px]': userAgeGroup === 'teen'
                        }">
                        Pokraƒçovat
                    </button>
                </div>

            </div>

            <!-- VIEW: Final Results (Competency Profile) -->
            <div x-show="currentView === 'final-results'"
                class="absolute inset-0 z-50 overflow-y-auto p-4 md:p-12 transition-colors duration-300" :class="{
                    'paper-bg': userAgeGroup === 'child',
                    'teen-light-bg': userAgeGroup === 'teen'
                }">

                <div class="max-w-4xl mx-auto shadow-2xl overflow-hidden shadow-black/20" :class="{
                        'bg-[#FFF8F0] rounded-xl border-[3px] border-[#264653]': userAgeGroup === 'child',
                        'bg-white rounded-none border-[2px] border-black shadow-[30px_30px_0px_rgba(0,0,0,0.1)]': userAgeGroup === 'teen'
                    }">
                    <div class="p-8 text-center border-b transition-all" :class="{
                            'bg-[#264653] text-white border-[#E8722A]': userAgeGroup === 'child',
                            'bg-white text-black border-black': userAgeGroup === 'teen'
                        }">
                        <h2 class="text-3xl font-bold mb-2 transition-all" :class="{
                                'font-caveat text-4xl': userAgeGroup === 'child',
                                'uppercase tracking-[0.3em] font-black': userAgeGroup === 'teen'
                            }">Kompetenƒçn√≠ Profil</h2>
                        <p class="transition-colors" :class="{
                                'text-white/70': userAgeGroup === 'child',
                                'text-black/40 text-[10px] uppercase tracking-[0.4em] mt-2': userAgeGroup === 'teen'
                            }">Souhrn tv√Ωch digit√°ln√≠ch n√°vyk≈Ø a postoj≈Ø</p>
                    </div>

                    <div class="p-8 md:p-12 space-y-12 transition-colors" :class="{
                            'bg-[#FFF8F0]': userAgeGroup === 'child',
                            'bg-white': userAgeGroup === 'teen'
                        }">

                        <!-- Radar Chart Section -->
                        <div class="flex flex-col items-center">
                            <div class="w-full max-w-md aspect-square relative"
                                x-init="$watch('currentView', (v) => { if(v === 'final-results') initRadarChart(); })">
                                <canvas id="radarChart"></canvas>
                            </div>
                        </div>

                        <!-- Skill Bars -->
                        <div class="space-y-10">
                            <!-- Safety -->
                            <div>
                                <div class="flex justify-between mb-3 items-end">
                                    <h3 class="font-black transition-colors uppercase tracking-[0.2em]" :class="{
                                            'text-[#264653] font-caveat text-xl tracking-normal lowercase': userAgeGroup === 'child',
                                            'text-black text-xs': userAgeGroup === 'teen'
                                        }">Digit√°ln√≠ Bezpeƒçnost a Ochrana Dat</h3>
                                    <span class="font-black transition-colors" :class="{
                                            'text-[#E8722A] font-mono text-xl': userAgeGroup === 'child',
                                            'text-black text-sm tracking-tighter': userAgeGroup === 'teen'
                                        }" x-text="Math.round(profile.safety || 0) + '%'"></span>
                                </div>
                                <div class="h-4 overflow-hidden transition-all" :class="{
                                        'bg-[#264653]/10 rounded-full border border-[#264653]/10': userAgeGroup === 'child',
                                        'bg-black/5 rounded-none h-[6px]': userAgeGroup === 'teen'
                                    }">
                                    <div class="h-full transition-all duration-1000" :class="{
                                            'bg-[#E8722A] rounded-full': userAgeGroup === 'child',
                                            'bg-[#FF3E3E]': userAgeGroup === 'teen'
                                        }" :style="`width: ${profile.safety || 0}%`"></div>
                                </div>
                                <p class="text-sm mt-4 p-5 transition-all shadow-sm" :class="{
                                        'bg-white text-[#264653] border-l-4 border-[#E8722A] rounded-r-lg': userAgeGroup === 'child',
                                        'bg-black/[0.03] text-black/60 border-l-4 border-black font-medium leading-relaxed': userAgeGroup === 'teen'
                                    }" x-text="feedback.safety"></p>
                            </div>

                            <!-- Empathy -->
                            <div>
                                <div class="flex justify-between mb-3 items-end">
                                    <h3 class="font-black transition-colors uppercase tracking-[0.2em]" :class="{
                                            'text-[#264653] font-caveat text-xl tracking-normal lowercase': userAgeGroup === 'child',
                                            'text-black text-xs': userAgeGroup === 'teen'
                                        }">Soci√°ln√≠ Interakce a Emoƒçn√≠ Inteligence</h3>
                                    <span class="font-black transition-colors" :class="{
                                            'text-[#2A9D8F] font-mono text-xl': userAgeGroup === 'child',
                                            'text-black text-sm tracking-tighter': userAgeGroup === 'teen'
                                        }" x-text="Math.round(profile.empathy || 0) + '%'"></span>
                                </div>
                                <div class="h-4 overflow-hidden transition-all" :class="{
                                        'bg-[#264653]/10 rounded-full border border-[#264653]/10': userAgeGroup === 'child',
                                        'bg-black/5 rounded-none h-[6px]': userAgeGroup === 'teen'
                                    }">
                                    <div class="h-full transition-all duration-1000" :class="{
                                            'bg-[#5D5FEF] rounded-full': userAgeGroup === 'child',
                                            'bg-[#A066FF]': userAgeGroup === 'teen'
                                        }" :style="`width: ${profile.empathy || 0}%`"></div>
                                </div>
                                <p class="text-sm mt-4 p-5 transition-all shadow-sm" :class="{
                                        'bg-white text-[#264653] border-l-4 border-[#5D5FEF] rounded-r-lg': userAgeGroup === 'child',
                                        'bg-black/[0.03] text-black/60 border-l-4 border-[#A066FF] font-medium leading-relaxed': userAgeGroup === 'teen'
                                    }" x-text="feedback.empathy"></p>
                            </div>

                            <!-- Wellbeing -->
                            <div>
                                <div class="flex justify-between mb-3 items-end">
                                    <h3 class="font-black transition-colors uppercase tracking-[0.2em]" :class="{
                                            'text-[#264653] font-caveat text-xl tracking-normal lowercase': userAgeGroup === 'child',
                                            'text-black text-xs': userAgeGroup === 'teen'
                                        }">Digit√°ln√≠ Wellbeing a Psychohygiena</h3>
                                    <span class="font-black transition-colors" :class="{
                                            'text-[#264653] font-mono text-xl': userAgeGroup === 'child',
                                            'text-black text-sm tracking-tighter': userAgeGroup === 'teen'
                                        }" x-text="Math.round(profile.wellbeing || 0) + '%'"></span>
                                </div>
                                <div class="h-4 overflow-hidden transition-all" :class="{
                                        'bg-[#264653]/10 rounded-full border border-[#264653]/10': userAgeGroup === 'child',
                                        'bg-black/5 rounded-none h-[6px]': userAgeGroup === 'teen'
                                    }">
                                    <div class="h-full transition-all duration-1000" :class="{
                                            'bg-[#2A9D8F] rounded-full': userAgeGroup === 'child',
                                            'bg-[#00F0FF]': userAgeGroup === 'teen'
                                        }" :style="`width: ${profile.wellbeing || 0}%`"></div>
                                </div>
                                <p class="text-sm mt-4 p-5 transition-all shadow-sm" :class="{
                                        'bg-white text-[#264653] border-l-4 border-[#2A9D8F] rounded-r-lg': userAgeGroup === 'child',
                                        'bg-black/[0.03] text-black/60 border-l-4 border-[#00F0FF] font-medium leading-relaxed': userAgeGroup === 'teen'
                                    }" x-text="feedback.wellbeing"></p>
                            </div>
                        </div>



                        <!-- Detailed Recommendations (Mistake Breakdown) -->
                        <div x-show="feedback.mistakes.length > 0">
                            <div class="flex items-center gap-3 mb-6">
                                <i data-lucide="compass" class="w-6 h-6"
                                    :class="userAgeGroup === 'child' ? 'text-[#E8722A]' : 'text-black'"></i>
                                <h3 class="font-black transition-colors uppercase tracking-[0.2em]" :class="{
                                        'text-[#264653] font-caveat text-2xl tracking-normal lowercase': userAgeGroup === 'child',
                                        'text-black text-xs': userAgeGroup === 'teen'
                                    }">Podrobn√° anal√Ωza a doporuƒçen√≠</h3>
                            </div>

                            <div class="space-y-4">
                                <template x-for="m in feedback.mistakes">
                                    <div class="p-6 transition-all border-l-4 shadow-sm" :class="{
                                            'bg-white border-[#264653] rounded-r-lg': userAgeGroup === 'child',
                                            'bg-black/[0.02] border-black rounded-none': userAgeGroup === 'teen'
                                        }">
                                        <div class="flex justify-between items-start mb-2">
                                            <span
                                                class="text-[10px] font-black uppercase tracking-widest px-2 py-1 rounded"
                                                :class="{
                                                    'bg-red-100 text-red-600': m.type === 'bad',
                                                    'bg-yellow-100 text-yellow-600': m.type === 'ok'
                                                }" x-text="m.type === 'bad' ? 'Rizikov√©' : 'Zlep≈°en√≠'"></span>
                                            <span class="text-[9px] opacity-40 font-mono" x-text="m.question"></span>
                                        </div>
                                        <p class="font-bold mb-1"
                                            :class="userAgeGroup === 'child' ? 'text-[#264653]' : 'text-black'"
                                            x-text="m.answer"></p>

                                        <!-- Correct Option -->
                                        <div class="my-3 p-3 border-l-2" :class="{
                                                'bg-green-50 border-green-400': userAgeGroup === 'child',
                                                'bg-black/5 border-black': userAgeGroup === 'teen'
                                            }">
                                            <span class="text-[9px] font-black uppercase tracking-widest block mb-1"
                                                :class="userAgeGroup === 'child' ? 'text-green-700' : 'text-black'">Optim√°ln√≠
                                                ≈ôe≈°en√≠:</span>
                                            <p class="text-sm font-semibold"
                                                :class="userAgeGroup === 'child' ? 'text-green-800' : 'text-black'"
                                                x-text="m.correctOption"></p>
                                            <p class="text-[11px] mt-1 opacity-70 italic"
                                                :class="userAgeGroup === 'child' ? 'text-green-700' : 'text-black/60'"
                                                x-text="m.correctReason"></p>
                                        </div>

                                        <p class="text-sm opacity-70 italic" x-text="m.feedback"></p>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- General Tips -->
                        <div x-show="feedback.tips.length > 0" class="mt-8 p-6 transition-all" :class="{
                                'bg-[#2A9D8F]/10 border-2 border-[#2A9D8F] border-dashed rounded-xl': userAgeGroup === 'child',
                                'bg-[#BFFF00]/5 border border-black rounded-none': userAgeGroup === 'teen'
                            }">
                            <h4 class="font-bold mb-4 uppercase tracking-widest text-xs"
                                :class="userAgeGroup === 'child' ? 'text-[#264653]' : 'text-black'">Kl√≠ƒçov√© tipy pro
                                tebe:</h4>
                            <ul class="space-y-3">
                                <template x-for="tip in feedback.tips">
                                    <li class="flex items-start gap-4 text-sm transition-colors" :class="{
                                            'text-[#264653]': userAgeGroup === 'child',
                                            'text-black/60 font-medium leading-relaxed': userAgeGroup === 'teen'
                                        }">
                                        <span class="text-green-500 mt-1 font-black">‚úì</span>
                                        <span x-text="tip"></span>
                                    </li>
                                </template>
                            </ul>
                        </div>

                        <!-- Reset Action -->
                        <div class="pt-8 text-center border-t border-black/5 mt-12">
                            <button @click="resetApp()"
                                class="text-[10px] font-black uppercase tracking-[0.3em] opacity-40 hover:opacity-100 hover:text-red-500 transition-all">
                                [ Resetovat v≈°echna data a zaƒç√≠t znovu ]
                            </button>
                        </div>

                    </div>
                </div>

            </div>

        </main>
    </div>

</body>

</html>